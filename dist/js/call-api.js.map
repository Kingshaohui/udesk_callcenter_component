{"version":3,"sources":["webpack:///webpack/bootstrap 7de95dabc31430f9be99","webpack:///./src/js/CallAPI.js","webpack:///./src/js/AjaxUtils.js","webpack:///./~/Base64/base64.js","webpack:///./src/js/component/Alert.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,uCAAsC,uCAAuC,kBAAkB;;AAE/F,kDAAiD,0CAA0C,0DAA0D,EAAE;;AAEvJ;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,UAAS;AACT;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,+FAA8F,qDAAqD;AACnJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,UAAS;AACT;;AAEA;AACA;AACA;;AAEA,mFAAkF,qBAAqB;AACvG;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,UAAS;AACT;;AAEA;AACA;AACA;;AAEA,oFAAmF,qBAAqB;AACxG;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,UAAS;AACT;;AAEA;AACA;AACA;;AAEA,qFAAoF,qBAAqB;AACzG;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,UAAS;AACT;;AAEA;AACA,EAAC;;AAED,gC;;;;;;ACxIA;;AAEA;;AAEA;;AAEA,uCAAsC,uCAAuC,kBAAkB;;AAE/F;AACA;;AAEA;AACA;AACA,MAAK;AACL;;AAEA,+CAA8C,SAAS;AACvD;AACA;AACA;AACA,cAAa;AACb;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA,cAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA,UAAS;AACT;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA,UAAS;AACT;AACA;AACA,UAAS;AACT;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA,UAAS;AACT;AACA;AACA,UAAS;AACT;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA,UAAS;AACT;AACA;AACA,UAAS;AACT;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,E;;;;;;ACxMA,EAAC;;AAED;AACA;AACA;AACA,cAAa;;AAEb;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA,kDAAiD;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH,EAAC;;;;;;;AChED;;AAEA;;AAEA,kDAAiD,0CAA0C,0DAA0D,EAAE;;AAEvJ;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,UAAS;AACT;;AAEA;AACA,EAAC;;AAED,kC","file":"js/call-api.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 7de95dabc31430f9be99","'use strict';\n\nvar _AjaxUtils = require('./AjaxUtils');\n\nvar _AjaxUtils2 = _interopRequireDefault(_AjaxUtils);\n\nvar _Alert = require('./component/Alert');\n\nvar _Alert2 = _interopRequireDefault(_Alert);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar emptyFunction = function emptyFunction() {};\n\nvar CallAPI = function () {\n    function CallAPI() {\n        _classCallCheck(this, CallAPI);\n    }\n\n    CallAPI.prototype.tokenInit = function tokenInit(token, subDomain, onTokenExpired) {\n        _AjaxUtils2[\"default\"].token = token;\n        _AjaxUtils2[\"default\"].host = __protocol__ + '://' + subDomain + __server__;\n        _AjaxUtils2[\"default\"].refreshToken = onTokenExpired;\n    };\n\n    CallAPI.prototype._updateAgentWorkState = function _updateAgentWorkState(agent_no, workStatus, cc_custom_state_id) {\n        var successCallback = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : emptyFunction;\n        var failureCallback = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : emptyFunction;\n\n        var params = {};\n        if (cc_custom_state_id !== undefined) {\n            params.cc_custom_state_id = cc_custom_state_id;\n        }\n        params.agent_work_state = workStatus;\n        params.agent_no = agent_no;\n\n        _AjaxUtils2[\"default\"].post('/agent_api/v1/callcenter/agents/update_agent_work_state', params, function (res) {\n            switch (res.code) {\n                case 1000:\n                    successCallback(res);\n                    break;\n                default:\n                    failureCallback(res);\n            }\n        }, function (res) {\n            failureCallback(res);\n        });\n    };\n\n    CallAPI.prototype.setMonitorWorkStatus = function setMonitorWorkStatus(agent_no, workStatus) {\n        var successCallback = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : emptyFunction;\n        var failureCallback = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : emptyFunction;\n\n        this._updateAgentWorkState(agent_no, workStatus, undefined, successCallback, failureCallback);\n    };\n\n    CallAPI.prototype.setMonitorWorkRestingStatus = function setMonitorWorkRestingStatus(agent_no, cc_custom_state_id) {\n        var successCallback = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : emptyFunction;\n        var failureCallback = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : emptyFunction;\n\n        this._updateAgentWorkState(agent_no, 'resting', cc_custom_state_id, successCallback, failureCallback);\n    };\n\n    CallAPI.prototype.setMonitorAgentWorkWay = function setMonitorAgentWorkWay(agent_no, agent_work_way) {\n        var successCallback = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : emptyFunction;\n        var failureCallback = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : emptyFunction;\n\n        _AjaxUtils2[\"default\"].post('/agent_api/v1/callcenter/agents/update_agent_work_way', { agent_no: agent_no, agent_work_way: agent_work_way }, function (res) {\n            switch (res.code) {\n                case 1000:\n                    successCallback(res);\n                    break;\n                default:\n                    failureCallback(res);\n            }\n        }, function (res) {\n            failureCallback(res);\n        });\n    };\n\n    CallAPI.prototype.monitorAgentListeing = function monitorAgentListeing(agent_no) {\n        var successCallback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : emptyFunction;\n        var failureCallback = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : emptyFunction;\n\n        _AjaxUtils2[\"default\"].post('/agent_api/v1/callcenter/desktop/listeing', { agent_no: agent_no }, function (res) {\n            switch (res.code) {\n                case 1001:\n                    successCallback(res);\n                    break;\n                default:\n                    failureCallback(res);\n            }\n        }, function (res) {\n            failureCallback(res);\n        });\n    };\n\n    CallAPI.prototype.monitorAgentInterpose = function monitorAgentInterpose(agent_no) {\n        var successCallback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : emptyFunction;\n        var failureCallback = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : emptyFunction;\n\n        _AjaxUtils2[\"default\"].post('/agent_api/v1/callcenter/desktop/interpose', { agent_no: agent_no }, function (res) {\n            switch (res.code) {\n                case 1001:\n                    successCallback(res);\n                    break;\n                default:\n                    failureCallback(res);\n            }\n        }, function (res) {\n            failureCallback(res);\n        });\n    };\n\n    CallAPI.prototype.monitorAgentSubstitute = function monitorAgentSubstitute(agent_no) {\n        var successCallback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : emptyFunction;\n        var failureCallback = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : emptyFunction;\n\n        _AjaxUtils2[\"default\"].post('/agent_api/v1/callcenter/desktop/substitute', { agent_no: agent_no }, function (res) {\n            switch (res.code) {\n                case 1001:\n                    successCallback(res);\n                    break;\n                default:\n                    failureCallback(res);\n            }\n        }, function (res) {\n            failureCallback(res);\n        });\n    };\n\n    return CallAPI;\n}();\n\nwindow.callAPI = new CallAPI();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/CallAPI.js\n// module id = 0\n// module chunks = 0","'use strict';\n\nvar _Base = require('Base64');\n\nvar _Base2 = _interopRequireDefault(_Base);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction getXMLHttpRequest() {\n    var xhr;\n\n    if (typeof XMLHttpRequest !== 'undefined') {\n        xhr = new XMLHttpRequest();\n    } else {\n        var versions = ['MSXML2.XmlHttp.5.0', 'MSXML2.XmlHttp.4.0', 'MSXML2.XmlHttp.3.0', 'MSXML2.XmlHttp.2.0', 'Microsoft.XmlHttp'];\n\n        for (var i = 0, len = versions.length; i < len; i++) {\n            try {\n                xhr = new ActiveXObject(versions[i]);\n                break;\n            } catch (e) {}\n        }\n    }\n\n    return xhr;\n}\n\nfunction load(options) {\n    var method = options.method;\n    var url = options.url;\n    var content = options.content;\n    var successCallback = options.successCallback;\n    var failureCallback = options.failureCallback;\n    var headers = options.headers;\n    var xhr = getXMLHttpRequest();\n\n    xhr.onreadystatechange = ensureReadiness;\n\n    function ensureReadiness() {\n        if (xhr.readyState < 4) {\n            return;\n        }\n\n        if (xhr.status < 200 || xhr.status >= 300) {\n            if (xhr.status === 400) {\n                var _content = xhr.response || xhr.responseText;\n                var _contentType = xhr.getResponseHeader('Content-Type');\n                if (_contentType.indexOf('application/json') > -1) {\n                    _content = JSON.parse(_content);\n                    if ((_content.code === 'invalid_password' || _content.code === 'token_expired') && obj.refreshToken && !options.retry) {\n                        obj.refreshToken(function (newToken) {\n                            options.retry = true;\n                            obj.token = newToken;\n                            load(options);\n                        });\n                        return;\n                    }\n                }\n            }\n            failureCallback && failureCallback(xhr);\n            return;\n        }\n\n        if (xhr.readyState === 4) {\n            var contentType = xhr.getResponseHeader('Content-Type');\n            if (contentType === 'application/javascript') {\n                successCallback && successCallback(eval(xhr.response || xhr.responseText), xhr);\n            } else if (contentType.indexOf('application/json') > -1) {\n                successCallback && successCallback(JSON.parse(xhr.response || xhr.responseText), xhr);\n            } else {\n                successCallback && successCallback(xhr.response || xhr.responseText, xhr);\n            }\n        }\n    }\n\n    xhr.open(method, obj.host + url, true);\n    if (headers) {\n        for (var i in headers) {\n            xhr.setRequestHeader(i, headers[i]);\n        }\n    }\n    xhr.setRequestHeader('Authorization', 'Basic ' + _Base2[\"default\"].btoa('agent:' + obj.token));\n\n    xhr.send(content);\n}\n\nfunction get(url, params, callback, failureCallback) {\n    var content = serializeParams(params);\n    if (content) {\n        if (url.indexOf('?') === -1) {\n            url += '?' + content;\n        } else {\n            url += '&' + content;\n        }\n    }\n    load({\n        method: 'GET',\n        url: url,\n        successCallback: function successCallback(content, xhr) {\n            if (typeof content === 'string') {\n                callback && callback(JSON.parse(content), xhr);\n            } else {\n                callback && callback(content, xhr);\n            }\n        },\n        failureCallback: failureCallback\n    });\n}\n\nfunction post(url, params, callback, failureCallback) {\n    load({\n        method: 'POST',\n        url: url,\n        headers: {\n            'Content-type': 'application/x-www-form-urlencoded'\n        },\n        content: serializeParams(params),\n        successCallback: callback,\n        failureCallback: failureCallback\n    });\n}\n\nfunction postJSON(url, params, callback, failureCallback) {\n    load({\n        method: 'POST',\n        url: url,\n        content: JSON.stringify(params),\n        successCallback: function successCallback(content, xhr) {\n            if (typeof content === 'string') {\n                callback && callback(JSON.parse(content), xhr);\n            } else {\n                callback && callback(content, xhr);\n            }\n        },\n        headers: {\n            'content-type': 'application/json'\n        },\n        failureCallback: failureCallback\n    });\n}\n\nfunction put(url, params, callback, failureCallback) {\n    load({\n        method: 'PUT',\n        url: url,\n        content: JSON.stringify(params),\n        successCallback: function successCallback(content, xhr) {\n            if (typeof content === 'string') {\n                callback && callback(JSON.parse(content), xhr);\n            } else {\n                callback && callback(content, xhr);\n            }\n        },\n        headers: {\n            'content-type': 'application/json'\n        },\n        failureCallback: failureCallback\n    });\n}\n\nfunction del(url, params, callback, failureCallback) {\n    load({\n        method: 'DELETE',\n        url: url,\n        content: JSON.stringify(params),\n        successCallback: function successCallback(content, xhr) {\n            if (typeof content === 'string') {\n                callback && callback(JSON.parse(content), xhr);\n            } else {\n                callback && callback(content, xhr);\n            }\n        },\n        headers: {\n            'content-type': 'application/json'\n        },\n        failureCallback: failureCallback\n    });\n}\n\nvar obj = {\n    get: get,\n    post: post,\n    postJSON: postJSON,\n    put: put,\n    \"delete\": del,\n    token: '',\n    host: '',\n    refreshToken: null\n};\n\nmodule.exports = obj;\n\nfunction serializeParams(params) {\n    var content = [];\n\n    for (var i in params) {\n        content.push(encodeURIComponent(i) + '=' + encodeURIComponent(params[i]));\n    }\n    content = content.join('&');\n    return content;\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/AjaxUtils.js\n// module id = 1\n// module chunks = 0 1",";(function () {\n\n  var object =\n    typeof exports != 'undefined' ? exports :\n    typeof self != 'undefined' ? self : // #8: web workers\n    $.global; // #31: ExtendScript\n\n  var chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n\n  function InvalidCharacterError(message) {\n    this.message = message;\n  }\n  InvalidCharacterError.prototype = new Error;\n  InvalidCharacterError.prototype.name = 'InvalidCharacterError';\n\n  // encoder\n  // [https://gist.github.com/999166] by [https://github.com/nignag]\n  object.btoa || (\n  object.btoa = function (input) {\n    var str = String(input);\n    for (\n      // initialize result and counter\n      var block, charCode, idx = 0, map = chars, output = '';\n      // if the next str index does not exist:\n      //   change the mapping table to \"=\"\n      //   check if d has no fractional digits\n      str.charAt(idx | 0) || (map = '=', idx % 1);\n      // \"8 - idx % 1 * 8\" generates the sequence 2, 4, 6, 8\n      output += map.charAt(63 & block >> 8 - idx % 1 * 8)\n    ) {\n      charCode = str.charCodeAt(idx += 3/4);\n      if (charCode > 0xFF) {\n        throw new InvalidCharacterError(\"'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.\");\n      }\n      block = block << 8 | charCode;\n    }\n    return output;\n  });\n\n  // decoder\n  // [https://gist.github.com/1020396] by [https://github.com/atk]\n  object.atob || (\n  object.atob = function (input) {\n    var str = String(input).replace(/[=]+$/, ''); // #31: ExtendScript bad parse of /=\n    if (str.length % 4 == 1) {\n      throw new InvalidCharacterError(\"'atob' failed: The string to be decoded is not correctly encoded.\");\n    }\n    for (\n      // initialize result and counters\n      var bc = 0, bs, buffer, idx = 0, output = '';\n      // get next character\n      buffer = str.charAt(idx++);\n      // character found in table? initialize bit storage and add its ascii value;\n      ~buffer && (bs = bc % 4 ? bs * 64 + buffer : buffer,\n        // and if not first of each 4 characters,\n        // convert the first 8 bits to one ascii character\n        bc++ % 4) ? output += String.fromCharCode(255 & bs >> (-2 * bc & 6)) : 0\n    ) {\n      // try to find character in table (0-63, not found => -1)\n      buffer = chars.indexOf(buffer);\n    }\n    return output;\n  });\n\n}());\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/Base64/base64.js\n// module id = 2\n// module chunks = 0 1","'use strict';\n\nexports.__esModule = true;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar doc = document;\n\nvar Alert = function () {\n    function Alert() {\n        _classCallCheck(this, Alert);\n    }\n\n    Alert.prototype.createElement = function createElement() {\n        var id = 'udesk-callcenter-component-alert';\n        var element = this.element = doc.getElementById(id);\n        var body = doc.body;\n\n        if (!element) {\n            element = this.element = doc.createElement('div');\n            element.id = id;\n\n            body.appendChild(element);\n        }\n    };\n\n    Alert.prototype.success = function success(text) {\n        this.createElement();\n        this.element.innerText = text;\n        this.element.style.backgroundColor = 'green';\n        this.show();\n    };\n\n    Alert.prototype.error = function error(text) {\n        this.createElement();\n        this.element.innerText = text;\n        this.element.style.backgroundColor = 'red';\n        this.show();\n    };\n\n    Alert.prototype.destroy = function destroy() {\n        if (this.element && this.element.parentNode) {\n            this.element.parentNode.removeChild(this.element);\n        }\n    };\n\n    Alert.prototype.show = function show() {\n        var _this = this;\n\n        this.element.style.display = 'block';\n        clearTimeout(this.timeoutId);\n        this.timeoutId = setTimeout(function () {\n            _this.element && (_this.element.style.display = 'none');\n        }, 5000);\n    };\n\n    return Alert;\n}();\n\nexports[\"default\"] = new Alert();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/component/Alert.js\n// module id = 3\n// module chunks = 0 1"],"sourceRoot":""}